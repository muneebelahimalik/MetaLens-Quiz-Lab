<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Instructor Dashboard - MetaLens Quiz Lab</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <div class="hero">
      <h1>üë®‚Äçüè´ Instructor Dashboard</h1>
    </div>

    <div class="card-grid">
      <div class="card">
        <h2>üìù Create Quiz</h2>
        <button onclick="showCreateQuiz()" class="btn btn-primary">New Quiz</button>
      </div>

      <div class="card">
        <h2>üöÄ Start Session</h2>
        <button onclick="showStartSession()" class="btn btn-accent">Launch Session</button>
      </div>

      <div class="card">
        <h2>üìä View Analytics</h2>
        <button onclick="showAnalytics()" class="btn btn-secondary">View Data</button>
      </div>
    </div>

    <!-- Create Quiz Modal -->
    <div id="createQuizModal" style="display: none;">
      <div class="card" style="max-width: 800px; margin: 40px auto;">
        <h2>Create New Quiz</h2>
        <form id="quizForm">
          <div class="form-group">
            <label>Quiz Title</label>
            <input type="text" id="quizTitle" required>
          </div>
          <div class="form-group">
            <label>Description</label>
            <textarea id="quizDescription" rows="3"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Create Quiz</button>
          <button type="button" onclick="hideCreateQuiz()" class="btn btn-secondary">Cancel</button>
        </form>
      </div>

      <div id="questionsSection" style="display: none;">
        <div class="card" style="max-width: 800px; margin: 20px auto;">
          <h3>Add Questions</h3>
          <form id="questionForm">
            <div class="form-group">
              <label>Question Text</label>
              <textarea id="questionText" rows="3" required></textarea>
            </div>
            <div class="form-group">
              <label>Option A</label>
              <input type="text" id="optionA" required>
            </div>
            <div class="form-group">
              <label>Option B</label>
              <input type="text" id="optionB" required>
            </div>
            <div class="form-group">
              <label>Option C</label>
              <input type="text" id="optionC" required>
            </div>
            <div class="form-group">
              <label>Option D (Optional)</label>
              <input type="text" id="optionD">
            </div>
            <div class="form-group">
              <label>Correct Option</label>
              <select id="correctOption" required>
                <option value="">Select...</option>
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
              </select>
            </div>
            <div class="form-group">
              <label>Explanation (Optional)</label>
              <textarea id="explanation" rows="2"></textarea>
            </div>
            <div class="form-group">
              <label>Topic Tag (Optional)</label>
              <input type="text" id="topicTag" placeholder="e.g., Thermodynamics, Circuits">
            </div>
            <button type="submit" class="btn btn-primary">Add Question</button>
            <button type="button" onclick="finishQuiz()" class="btn btn-accent">Finish Quiz</button>
          </form>
          <div id="questionsList" style="margin-top: 20px;"></div>
        </div>
      </div>
    </div>

    <!-- Start Session Modal -->
    <div id="startSessionModal" style="display: none;">
      <div class="card" style="max-width: 600px; margin: 40px auto;">
        <h2>Start New Session</h2>
        <form id="sessionForm">
          <div class="form-group">
            <label>Select Quiz</label>
            <select id="sessionQuiz" required></select>
          </div>
          <div class="form-group">
            <label>Mode</label>
            <select id="sessionMode">
              <option value="live">Live (Instructor controls questions)</option>
              <option value="solo">Solo Practice</option>
            </select>
          </div>
          <button type="submit" class="btn btn-primary">Start Session</button>
          <button type="button" onclick="hideStartSession()" class="btn btn-secondary">Cancel</button>
        </form>
      </div>
    </div>

    <!-- Live Session Control -->
    <div id="liveControl" style="display: none;">
      <div class="card" style="max-width: 800px; margin: 40px auto; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
        <h2>Live Session Active</h2>
        <div class="room-code-display" id="liveRoomCode" style="margin: 20px 0;"></div>
        <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">
          <strong>Participants:</strong> <span id="participantCount">0</span>
        </p>
        <div style="text-align: center;">
          <button id="startQuizBtn" class="btn btn-accent" style="margin: 10px;">Start Quiz</button>
          <button id="nextQuestionBtn" class="btn btn-accent" style="margin: 10px; display: none;">Next Question</button>
          <button onclick="endSession()" class="btn btn-danger" style="margin: 10px;">End Session</button>
        </div>
        <div id="liveStats" style="margin-top: 30px; background: white; color: #333; padding: 20px; border-radius: 8px;"></div>
      </div>
    </div>

    <!-- Analytics Modal -->
    <div id="analyticsModal" style="display: none;">
      <div class="card" style="max-width: 1000px; margin: 40px auto;">
        <h2>Session Analytics</h2>
        <div class="form-group">
          <label>Select Session</label>
          <select id="analyticsSession"></select>
          <button onclick="loadAnalytics()" class="btn btn-primary" style="margin-top: 10px;">Load Data</button>
        </div>
        <div id="analyticsContent"></div>
        <button type="button" onclick="hideAnalytics()" class="btn btn-secondary" style="margin-top: 20px;">Close</button>
      </div>
    </div>
  </div>

  <script src="instructor.js"></script>
</body>
</html>